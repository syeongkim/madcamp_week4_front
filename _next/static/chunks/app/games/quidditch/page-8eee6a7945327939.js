(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[978],{1110:function(t,e,r){Promise.resolve().then(r.bind(r,5658))},5658:function(t,e,r){"use strict";r.r(e);var i=r(7437),o=r(2265);r(396);var l=r(9428);e.default=()=>{let[t,e]=(0,o.useState)(0),[r,n]=(0,o.useState)({top:"50%",left:"50%"}),[a,s]=(0,o.useState)({top:"80%",left:"50%"}),[d,c]=(0,o.useState)(!1),[f,u]=(0,o.useState)(30),h=()=>{n({top:90*Math.random()+"%",left:90*Math.random()+"%"})},m=t=>{var e;if(!d)return;let r=null===(e=document.querySelector(".flex-grow"))||void 0===e?void 0:e.getBoundingClientRect(),i=document.getElementById("player");if(r&&i){let e=parseFloat(a.top)/100*r.height,o=parseFloat(a.left)/100*r.width;"ArrowUp"===t.key?e=Math.max(0,e-.05*r.height):"ArrowDown"===t.key?e=Math.min(r.height-i.offsetHeight,e+.05*r.height):"ArrowLeft"===t.key?o=Math.max(0,o-.05*r.width):"ArrowRight"===t.key&&(o=Math.min(r.width-i.offsetWidth,o+.05*r.width)),s({top:"".concat(e/r.height*100,"%"),left:"".concat(o/r.width*100,"%")})}},p=()=>{var r,i;let o=null===(r=document.getElementById("quidditch-ball"))||void 0===r?void 0:r.getBoundingClientRect(),l=null===(i=document.getElementById("player"))||void 0===i?void 0:i.getBoundingClientRect();o&&l&&!(l.right<o.left||l.left>o.right||l.bottom<o.top||l.top>o.bottom)&&(e(t+1),h())};return(0,o.useEffect)(()=>{if(d){let t=setInterval(h,2e3);return()=>clearInterval(t)}},[d]),(0,o.useEffect)(()=>{if(d)return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}},[d,a]),(0,o.useEffect)(()=>{if(d){let t=setInterval(p,100);return()=>clearInterval(t)}},[d,a,r]),(0,o.useEffect)(()=>{if(d&&f>0){let t=setInterval(()=>{u(f-1)},1e3);return()=>clearInterval(t)}if(0===f){c(!1);let e=localStorage.getItem("dormId");e?(0,l.Y)(e,t,"add").catch(t=>{console.error("Failed to update dorm points:",t)}):console.error("No dorm ID found in local storage")}},[d,f,t]),(0,i.jsxs)("div",{className:"min-h-screen bg-quidditch-single bg-cover bg-center flex flex-col items-center text-center relative",children:[(0,i.jsx)("audio",{src:"https://syeongkim.github.io/madcamp_week4_front/musics/11_The_Quidditch_Match_Game.mp3",autoPlay:!0,loop:!0}),(0,i.jsx)("h1",{className:"font-Harry text-gradient-red fixed top-0 w-full",children:"Quidditch Game"}),(0,i.jsxs)("div",{className:"fixed top-10 right-10 text-black text-2xl font-Harry",children:["Score: ",t]}),(0,i.jsxs)("div",{className:"fixed top-10 left-10 text-black text-2xl font-Harry",children:["Time Left: ",f,"s"]}),(0,i.jsxs)("div",{className:"flex-grow flex items-center justify-center relative w-full h-full",children:[!d&&(0,i.jsx)("button",{className:"btn-start font-Harry text-white text-4xl",onClick:()=>{c(!0),e(0),u(30),s({top:"80%",left:"50%"}),h()},children:"Start"}),d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{id:"quidditch-ball",className:"quidditch-ball",style:{top:r.top,left:r.left}}),(0,i.jsx)("div",{id:"player",className:"player",style:{top:a.top,left:a.left}})]})]}),!d&&0===f&&(0,i.jsxs)("div",{className:"fixed bottom-20 text-white text-2xl font-Harry",children:["Game Over! Your Score: ",t]})]})}},9428:function(t,e,r){"use strict";async function i(t,e,r){if(!(await fetch("https://hogwart.paulupa.com/api/dorms/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({dormScore:e,operation:r})})).ok)throw Error("Failed to update points")}r.d(e,{Y:function(){return i}})},396:function(){}},function(t){t.O(0,[182,971,23,744],function(){return t(t.s=1110)}),_N_E=t.O()}]);