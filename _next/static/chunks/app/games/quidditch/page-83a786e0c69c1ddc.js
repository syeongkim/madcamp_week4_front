(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[978],{1110:function(t,e,o){Promise.resolve().then(o.bind(o,5658))},5658:function(t,e,o){"use strict";o.r(e);var r=o(7437),i=o(2265);o(396);var n=o(9428);e.default=()=>{let[t,e]=(0,i.useState)(0),[o,a]=(0,i.useState)({top:"50%",left:"50%"}),[l,s]=(0,i.useState)({top:"80%",left:"50%"}),[c,d]=(0,i.useState)(!1),[f,u]=(0,i.useState)(30),h=()=>{a({top:90*Math.random()+"%",left:90*Math.random()+"%"})},m=t=>{var e;if(!c)return;let o=null===(e=document.querySelector(".flex-grow"))||void 0===e?void 0:e.getBoundingClientRect(),r=document.getElementById("player");if(o&&r){let e=parseFloat(l.top)/100*o.height,i=parseFloat(l.left)/100*o.width;"ArrowUp"===t.key?e=Math.max(0,e-.05*o.height):"ArrowDown"===t.key?e=Math.min(o.height-r.offsetHeight,e+.05*o.height):"ArrowLeft"===t.key?i=Math.max(0,i-.05*o.width):"ArrowRight"===t.key&&(i=Math.min(o.width-r.offsetWidth,i+.05*o.width)),s({top:"".concat(e/o.height*100,"%"),left:"".concat(i/o.width*100,"%")})}},p=()=>{var o,r;let i=null===(o=document.getElementById("quidditch-ball"))||void 0===o?void 0:o.getBoundingClientRect(),n=null===(r=document.getElementById("player"))||void 0===r?void 0:r.getBoundingClientRect();i&&n&&!(n.right<i.left||n.left>i.right||n.bottom<i.top||n.top>i.bottom)&&(e(t+1),h())};return(0,i.useEffect)(()=>{if(c){let t=setInterval(h,2e3);return()=>clearInterval(t)}},[c]),(0,i.useEffect)(()=>{if(c)return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}},[c,l]),(0,i.useEffect)(()=>{if(c){let t=setInterval(p,100);return()=>clearInterval(t)}},[c,l,o]),(0,i.useEffect)(()=>{if(c&&f>0){let t=setInterval(()=>{u(f-1)},1e3);return()=>clearInterval(t)}if(0===f){d(!1);let e=localStorage.getItem("dormId");e?(0,n.Y)(e,t,"add").catch(t=>{console.error("Failed to update dorm points:",t)}):console.error("No dorm ID found in local storage")}},[c,f,t]),(0,r.jsxs)("div",{className:"min-h-screen bg-quidditch-single bg-cover bg-center flex flex-col items-center text-center relative",children:[(0,r.jsx)("audio",{src:"https://syeongkim.github.io/madcamp_week4_front/musics/11_The_Quidditch_Match_Game.mp3",autoPlay:!0,loop:!0}),(0,r.jsx)("h1",{className:"font-Harry text-gradient-red fixed top-0 w-full",children:"Quidditch Game"}),(0,r.jsxs)("div",{className:"fixed top-10 right-10 text-black text-2xl font-Harry",children:["Score: ",t]}),(0,r.jsxs)("div",{className:"fixed top-10 left-10 text-black text-2xl font-Harry",children:["Time Left: ",f,"s"]}),(0,r.jsxs)("div",{className:"flex-grow flex items-center justify-center relative w-full h-full",children:[!c&&(0,r.jsx)("button",{className:"btn-start font-Harry text-white text-4xl",onClick:()=>{d(!0),e(0),u(30),s({top:"80%",left:"50%"}),h()},children:"Start"}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:"quidditch-ball",className:"quidditch-ball",style:{top:o.top,left:o.left}}),(0,r.jsx)("div",{id:"player",className:"player",style:{top:l.top,left:l.left}})]})]}),!c&&0===f&&(0,r.jsxs)("div",{className:"fixed bottom-20 text-white text-2xl font-Harry",children:["Game Over! Your Score: ",t]})]})}},9428:function(t,e,o){"use strict";async function r(t){let e=await fetch("https://hogwart.paulupa.com/api/dorms/".concat(t));if(!e.ok)throw Error("Failed to fetch dorm details");let o=await e.json();return{points:o.dorm_score||0,students:o.students||[]}}async function i(t,e,o){if(!(await fetch("https://hogwart.paulupa.com/api/dorms/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({dormScore:e,operation:o})})).ok)throw Error("Failed to update points")}o.d(e,{E:function(){return r},Y:function(){return i}})},396:function(){}},function(t){t.O(0,[182,971,23,744],function(){return t(t.s=1110)}),_N_E=t.O()}]);