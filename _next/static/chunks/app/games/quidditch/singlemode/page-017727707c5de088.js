(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[909],{6482:function(t,e,r){Promise.resolve().then(r.bind(r,1837))},1837:function(t,e,r){"use strict";r.r(e);var l=r(7437),i=r(2265);r(396);var o=r(9428);e.default=()=>{let[t,e]=(0,i.useState)(0),[r,n]=(0,i.useState)({top:"50%",left:"50%"}),[a,s]=(0,i.useState)({top:"80%",left:"50%"}),[d,c]=(0,i.useState)(!1),[f,u]=(0,i.useState)(30),h=()=>{n({top:90*Math.random()+"%",left:90*Math.random()+"%"})},m=t=>{var e;if(!d)return;let r=null===(e=document.querySelector(".flex-grow"))||void 0===e?void 0:e.getBoundingClientRect(),l=document.getElementById("player");if(r&&l){let e=parseFloat(a.top)/100*r.height,i=parseFloat(a.left)/100*r.width;"ArrowUp"===t.key?e=Math.max(0,e-.05*r.height):"ArrowDown"===t.key?e=Math.min(r.height-l.offsetHeight,e+.05*r.height):"ArrowLeft"===t.key?i=Math.max(0,i-.05*r.width):"ArrowRight"===t.key&&(i=Math.min(r.width-l.offsetWidth,i+.05*r.width)),s({top:"".concat(e/r.height*100,"%"),left:"".concat(i/r.width*100,"%")})}},p=()=>{var r,l;let i=null===(r=document.getElementById("quidditch-ball"))||void 0===r?void 0:r.getBoundingClientRect(),o=null===(l=document.getElementById("player"))||void 0===l?void 0:l.getBoundingClientRect();i&&o&&!(o.right<i.left||o.left>i.right||o.bottom<i.top||o.top>i.bottom)&&(e(t+1),h())};return(0,i.useEffect)(()=>{if(d){let t=setInterval(h,2e3);return()=>clearInterval(t)}},[d]),(0,i.useEffect)(()=>{if(d)return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}},[d,a]),(0,i.useEffect)(()=>{if(d){let t=setInterval(p,100);return()=>clearInterval(t)}},[d,a,r]),(0,i.useEffect)(()=>{if(d&&f>0){let t=setInterval(()=>{u(f-1)},1e3);return()=>clearInterval(t)}if(0===f){c(!1);let e=localStorage.getItem("dormId");e?(0,o.Y)(e,t).catch(t=>{console.error("Failed to update dorm points:",t)}):console.error("No dorm ID found in local storage")}},[d,f,t]),(0,l.jsxs)("div",{className:"min-h-screen bg-quidditch-single bg-cover bg-center flex flex-col items-center text-center relative",children:[(0,l.jsx)("audio",{src:"/musics/11_The_Quidditch_Match_Game.mp3",autoPlay:!0,loop:!0}),(0,l.jsx)("h1",{className:"font-Harry text-gradient-red fixed top-0 w-full",children:"Single Mode"}),(0,l.jsxs)("div",{className:"fixed top-10 right-10 text-black text-2xl font-Harry",children:["Score: ",t]}),(0,l.jsxs)("div",{className:"fixed top-10 left-10 text-black text-2xl font-Harry",children:["Time Left: ",f,"s"]}),(0,l.jsxs)("div",{className:"flex-grow flex items-center justify-center relative w-full h-full",children:[!d&&(0,l.jsx)("button",{className:"btn-start font-Harry text-white text-4xl",onClick:()=>{c(!0),e(0),u(30),s({top:"80%",left:"50%"}),h()},children:"Start"}),d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{id:"quidditch-ball",className:"quidditch-ball",style:{top:r.top,left:r.left}}),(0,l.jsx)("div",{id:"player",className:"player",style:{top:a.top,left:a.left}})]})]}),!d&&0===f&&(0,l.jsxs)("div",{className:"fixed bottom-20 text-white text-2xl font-Harry",children:["Game Over! Your Score: ",t]})]})}},9428:function(t,e,r){"use strict";async function l(t,e){if(!(await fetch("http://3.34.19.176:8080/api/dorms/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({dormScore:e})})).ok)throw Error("Failed to update points")}r.d(e,{Y:function(){return l}})},396:function(){}},function(t){t.O(0,[182,971,23,744],function(){return t(t.s=6482)}),_N_E=t.O()}]);