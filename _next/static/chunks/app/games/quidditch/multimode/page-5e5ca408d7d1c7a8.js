(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[326],{3230:function(e,t,o){Promise.resolve().then(o.bind(o,1403))},1403:function(e,t,o){"use strict";o.r(t);var l=o(7437),n=o(2265),r=o(4999);o(396);let s=(0,r.io)("http://localhost:8080");t.default=()=>{let[e,t]=(0,n.useState)({}),[o,r]=(0,n.useState)({top:"50%",left:"50%"}),[a,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(30),[f,u]=(0,n.useState)(null);(0,n.useEffect)(()=>(s.on("connect",()=>{console.log("Connected to server"),s.id&&u(s.id)}),s.on("currentPlayers",e=>{console.log("Current players:",e),t(e)}),s.on("newPlayer",e=>{let{playerId:o,player:l}=e;console.log("New player:",l),t(e=>({...e,[o]:l}))}),s.on("playerMoved",e=>{let{playerId:o,position:l}=e;console.log("Player moved:",o,l),t(e=>({...e,[o]:{...e[o],position:l}}))}),s.on("playerDisconnected",e=>{console.log("Player disconnected:",e),t(t=>{let o={...t};return delete o[e],o})}),()=>{s.off("connect"),s.off("currentPlayers"),s.off("newPlayer"),s.off("playerMoved"),s.off("playerDisconnected")}),[]);let p=()=>{r({top:90*Math.random()+"%",left:90*Math.random()+"%"})},h=o=>{if(!a||!f)return;let l=e[f],{top:n,left:r}=(null==l?void 0:l.position)||{top:"50%",left:"50%"};"ArrowUp"===o.key?n=Math.max(0,parseFloat(n)-5)+"%":"ArrowDown"===o.key?n=Math.min(100,parseFloat(n)+5)+"%":"ArrowLeft"===o.key?r=Math.max(0,parseFloat(r)-5)+"%":"ArrowRight"===o.key&&(r=Math.min(100,parseFloat(r)+5)+"%"),f&&(t(e=>({...e,[f]:{...e[f],position:{top:n,left:r}}})),s.emit("playerMovement",{position:{top:n,left:r}}))};return(0,n.useEffect)(()=>{if(a)return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[a,f,e]),(0,n.useEffect)(()=>{if(a&&c>0){let e=setInterval(()=>{d(e=>e-1)},1e3);return()=>clearInterval(e)}0===c&&i(!1)},[a,c]),(0,l.jsxs)("div",{className:"min-h-screen bg-quidditch-multi bg-cover bg-center flex flex-col items-center text-center relative",children:[(0,l.jsx)("audio",{src:"https://syeongkim.github.io/madcamp_week4_front/musics/11_The_Quidditch_Match_Game.mp3",autoPlay:!0,loop:!0}),(0,l.jsx)("h1",{className:"font-Harry text-gradient-red fixed top-0 w-full",children:"Multi Mode"}),(0,l.jsxs)("div",{className:"fixed top-10 right-10 text-black text-xl font-Harry",children:["Time Left: ",c,"s"]}),(0,l.jsxs)("div",{className:"flex-grow flex items-center justify-center relative w-full h-full",children:[!a&&(0,l.jsx)("button",{className:"btn-start font-Harry text-white text-4xl",onClick:()=>{i(!0),d(30),p()},children:"Start"}),a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{id:"quidditch-ball",className:"quidditch-ball",style:{top:o.top,left:o.left}}),Object.keys(e).map(t=>(0,l.jsx)("div",{id:t,className:"player",style:{top:e[t].position.top,left:e[t].position.left}},t))]})]}),!a&&0===c&&(0,l.jsx)("div",{className:"fixed bottom-20 text-white text-2xl font-Harry",children:"Game Over!"})]})}},396:function(){}},function(e){e.O(0,[182,999,971,23,744],function(){return e(e.s=3230)}),_N_E=e.O()}]);