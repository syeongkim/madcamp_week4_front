(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[326],{3230:function(e,t,l){Promise.resolve().then(l.bind(l,1403))},1403:function(e,t,l){"use strict";l.r(t);var o=l(7437),n=l(2265),r=l(4999);l(396);let s=(0,r.io)("http://localhost:8080");t.default=()=>{let[e,t]=(0,n.useState)({}),[l,r]=(0,n.useState)({top:"50%",left:"50%"}),[a,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(30),[f,u]=(0,n.useState)(null);(0,n.useEffect)(()=>(s.on("connect",()=>{console.log("Connected to server"),s.id&&u(s.id)}),s.on("currentPlayers",e=>{console.log("Current players:",e),t(e)}),s.on("newPlayer",e=>{let{playerId:l,player:o}=e;console.log("New player:",o),t(e=>({...e,[l]:o}))}),s.on("playerMoved",e=>{let{playerId:l,position:o}=e;console.log("Player moved:",l,o),t(e=>({...e,[l]:{...e[l],position:o}}))}),s.on("playerDisconnected",e=>{console.log("Player disconnected:",e),t(t=>{let l={...t};return delete l[e],l})}),()=>{s.off("connect"),s.off("currentPlayers"),s.off("newPlayer"),s.off("playerMoved"),s.off("playerDisconnected")}),[]);let p=()=>{r({top:90*Math.random()+"%",left:90*Math.random()+"%"})},h=l=>{if(!a||!f)return;let o=e[f],{top:n,left:r}=(null==o?void 0:o.position)||{top:"50%",left:"50%"};"ArrowUp"===l.key?n=Math.max(0,parseFloat(n)-5)+"%":"ArrowDown"===l.key?n=Math.min(100,parseFloat(n)+5)+"%":"ArrowLeft"===l.key?r=Math.max(0,parseFloat(r)-5)+"%":"ArrowRight"===l.key&&(r=Math.min(100,parseFloat(r)+5)+"%"),f&&(t(e=>({...e,[f]:{...e[f],position:{top:n,left:r}}})),s.emit("playerMovement",{position:{top:n,left:r}}))};return(0,n.useEffect)(()=>{if(a)return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[a,f,e]),(0,n.useEffect)(()=>{if(a&&c>0){let e=setInterval(()=>{d(e=>e-1)},1e3);return()=>clearInterval(e)}0===c&&i(!1)},[a,c]),(0,o.jsxs)("div",{className:"min-h-screen bg-quidditch-multi bg-cover bg-center flex flex-col items-center text-center relative",children:[(0,o.jsx)("audio",{src:"/musics/11_The_Quidditch_Match_Game.mp3",autoPlay:!0,loop:!0}),(0,o.jsx)("h1",{className:"font-Harry text-gradient-red fixed top-0 w-full",children:"Multi Mode"}),(0,o.jsxs)("div",{className:"fixed top-10 right-10 text-black text-xl font-Harry",children:["Time Left: ",c,"s"]}),(0,o.jsxs)("div",{className:"flex-grow flex items-center justify-center relative w-full h-full",children:[!a&&(0,o.jsx)("button",{className:"btn-start font-Harry text-white text-4xl",onClick:()=>{i(!0),d(30),p()},children:"Start"}),a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{id:"quidditch-ball",className:"quidditch-ball",style:{top:l.top,left:l.left}}),Object.keys(e).map(t=>(0,o.jsx)("div",{id:t,className:"player",style:{top:e[t].position.top,left:e[t].position.left}},t))]})]}),!a&&0===c&&(0,o.jsx)("div",{className:"fixed bottom-20 text-white text-2xl font-Harry",children:"Game Over!"})]})}},396:function(){}},function(e){e.O(0,[182,999,971,23,744],function(){return e(e.s=3230)}),_N_E=e.O()}]);